<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
    <link rel="stylesheet" href="../CSS/estilos.css">
    <link rel="icon" type="image/x-icon" href="../IMG/favicon.png">
    <script src="../JS/contraseña.js""></script>
    <meta name="author" content="Cristian Jurado López" />
<body>
    <div class="arribaformulario">
    <a href="../HTML/index.html" target="_top"> <img src="../IMG/logo.png" alt="Logo"> </a>
    </div>
    <div class="container">
        <h2>Registrarse</h2>
        <form action="../PHP/formulario.php" method="post" id="formulario">
            <div class="form-group">
                <label for="nombre"></label>
                <input type="text" placeholder="Nombre*" id="nombre" name="nombre" required>
            </div>
            <div class="form-group">
                <label for="email"></label>
                <input type="text" placeholder="Email*" id="email" name="email" required>
                <span id="mail-error" style="color: red;"></span>
            </div>
            <div class="form-group">
                <label for="contrasena"></label>
                <input type="password" placeholder="Contraseña*" id="password" name="password" required>
            </div>
            <div class="form-group">
                <label for="contrasena2"></label>
                <input type="password" placeholder="Contraseña*" id="repeated_password" name="password" required>
                <span id="password-error" style="color: red;"></span>
            </div>
           
            <button type="submit">Registrarse</button>
        </form>
        <div class="terminos">
            <p>Al registrarte, declaras haber leído y aceptado nuestros Términos y Condiciones. Consulta nuestra Política de Privacidad para obtener información sobre cómo procesamos tus datos.</p>
        </div>
        <div class="pieformulario">
            <p>¿Ya tienes cuenta? <a href="./login.html">Entra</a></p>
        </div>
        
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function(){

            const passwordInput=document.getElementById('password');
            const repeated_passwordInput=document.getElementById('repeated_password');
            const passwordError=document.getElementById('password-error');
            const mailInput = document.getElementById('email');
            const mailError = document.getElementById('mail-error');
            const formulario = document.getElementById('formulario');

            function validatePassword(){
                if(passwordInput.value !== repeated_passwordInput.value){
                    passwordError.textContent = "Las contrasenas no coinciden";
                    return false;
                }else{
                    passwordError.textContent = "";
                    return true;
                }
            }
            passwordInput.addEventListener('input', validatePassword);
            repeated_passwordInput.addEventListener('input', validatePassword);


            function validateMail(){
                if(!mailInput.value.includes('@')){
                    mailError.textContent="El correo electrónico debe contener '@'";
                    return false;
                }else{
                    mailError.textContent="";
                    return true;
                }
            }
            mailInput.addEventListener('input', validateMail);

            function validarFormulario(evento){
                const isPasswordValid=validatePassword();
                const isMailValid=validateMail();

                if(!isPasswordValid || !isMailValid){
                    let errorMessage="Corrija los siguientes errores: \n";
                    if(!isPasswordValid){
                        errorMessage += "- Las contraseñas no coinciden. \n";
                    }
                    if(!isMailValid){
                        errorMessage += "- El correo electronico debe contener '@' .\n";
                    }
                    alert(errorMessage);
                    evento.preventDefault();
                }
            }

            formulario.addEventListener('submit',validarFormulario);

        });
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>
